{"version":3,"file":"db.js","sourceRoot":"","sources":["../../src/db/db.ts"],"names":[],"mappings":";AAAA,mCAAsC;AACtC,oCAAuC;AAEvC;IAII;QACI,EAAE,CAAC,OAAO,EAAE,CAAC;IACjB,CAAC;IAEM,UAAO,GAAd;QACI,EAAE,CAAA,CAAC,IAAI,CAAC,gBAAgB,CAAC;YAAC,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;QAEvD,IAAI,CAAC,kBAAkB,GAAI,QAAQ,CAAC,UAAU,CAAC;QAC/C,IAAI,CAAC,kBAAkB,CAAC,IAAI,CAAC,MAAM,EAAE;YACjC,OAAO,CAAC,GAAG,CAAC,qBAAqB,CAAC,CAAC;QACvC,CAAC,CAAC,CAAC;QAEH,IAAI,CAAC,gBAAgB,GAAG,QAAQ,CAAC,OAAO,CAAC,SAAS,CAAC,oBAAoB,CAAC,CAAC;QACzE,MAAM,CAAC,IAAI,CAAC,gBAAgB,CAAC;IACjC,CAAC;IAEL,SAAC;AAAD,CAAC,AApBD,IAoBC;AAED,EAAE,CAAC,OAAO,EAAE,CAAC;AACb,iBAAS,EAAE,CAAC","sourcesContent":["import Mongoose = require(\"mongoose\");\nimport Constants = require(\"./config\");\n\nclass DB {\n    static mongooseInstance: any;\n    static mongooseConnection: Mongoose.Connection;\n    \n    constructor () {\n        DB.connect();\n    }\n    \n    static connect (): Mongoose.Connection {\n        if(this.mongooseInstance) return this.mongooseInstance;\n        \n        this.mongooseConnection  = Mongoose.connection;\n        this.mongooseConnection.once(\"open\", () => {\n            console.log(\"Connect to mongodb.\");\n        });\n        \n        this.mongooseInstance = Mongoose.connect(Constants.DB_CONNECTION_STRING);\n        return this.mongooseInstance;\n    }\n    \n}\n\nDB.connect();\nexport = DB;\n     "]}